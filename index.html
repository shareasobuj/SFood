<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SFood.com | অর্ডার ম্যানেজমেন্ট সিস্টেম</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #ff4757; --secondary: #2ed573; --dark: #2f3542; --light: #f1f2f6; --white: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Hind Siliguri', sans-serif; }
        body { background: var(--light); padding-top: 70px; }

        /* Navbar */
        header { background: var(--white); padding: 15px 8%; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: bold; color: var(--dark); text-decoration: none; cursor: pointer; }
        .logo span { color: var(--primary); }
        .nav-links { list-style: none; display: flex; gap: 20px; }
        .nav-links li { cursor: pointer; font-weight: 500; }

        /* Pages */
        .page { display: none; padding: 30px 8%; min-height: 100vh; animation: fadeIn 0.4s ease; }
        .active-page { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Components */
        .card { background: var(--white); padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: center; margin-bottom: 20px; }
        .btn { background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.3s; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; }

        /* History Table */
        table { width: 100%; background: white; border-radius: 10px; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: var(--primary); color: white; }
    </style>
</head>
<body>

    <header>
        <div class="logo" onclick="showPage('home')">SFood<span>.com</span></div>
        <ul class="nav-links">
            <li onclick="showPage('home')">হোম</li>
            <li onclick="showPage('menu')">মেনু</li>
            <li onclick="showPage('history')">অর্ডার</li>
            <li onclick="showPage('profile')" id="navUser">প্রোফাইল</li>
        </ul>
    </header>

    <div id="home" class="page active-page">
        <div class="card" style="background: var(--primary); color: white; padding: 60px 20px;">
            <h1>SFood এ আপনাকে স্বাগতম</h1>
            <p>আপনার প্রিয় খাবার এখন এক ক্লিকেই!</p>
        </div>
    </div>

    <div id="menu" class="page">
        <h2>আজকের মেনু</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
            <div class="card">
                <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400" width="100%" style="border-radius:10px">
                <h3>চিকেন বার্গার</h3>
                <p>৳ ২২০</p>
                <button class="btn" onclick="placeOrder('চিকেন বার্গার', 220)">অর্ডার দিন</button>
            </div>
            <div class="card">
                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400" width="100%" style="border-radius:10px">
                <h3>পিৎজা</h3>
                <p>৳ ৪৫০</p>
                <button class="btn" onclick="placeOrder('পিৎজা', 450)">অর্ডার দিন</button>
            </div>
        </div>
    </div>

    <div id="history" class="page">
        <h2>অর্ডার হিস্ট্রি</h2>
        <table>
            <thead>
                <tr>
                    <th>আইটেম</th>
                    <th>মূল্য</th>
                    <th>অবস্থা</th>
                </tr>
            </thead>
            <tbody id="historyBody"></tbody>
        </table>
    </div>

    <div id="profile" class="page">
        <div id="authView">
            <h2>রেজিস্ট্রেশন করুন</h2>
            <div class="card" style="max-width: 400px; margin: 0 auto;">
                <input type="text" id="uName" placeholder="আপনার নাম">
                <input type="tel" id="uPhone" placeholder="ফোন নম্বর">
                <input type="text" id="uAddress" placeholder="ডেলিভারি ঠিকানা">
                <button class="btn" onclick="saveUser()">সেভ করুন</button>
            </div>
        </div>
        <div id="profileView" class="hidden" style="display:none">
            <h2>প্রোফাইল</h2>
            <div class="card" style="max-width: 400px; margin: 0 auto;">
                <h3 id="pName"></h3>
                <p id="pPhone"></p>
                <p id="pAddress" style="color: gray;"></p>
                <button class="btn" style="background: #747d8c; margin-top: 10px;" onclick="logout()">লগ আউট</button>
            </div>
        </div>
    </div>

    <script>
        // --- GOOGLE SHEETS API CONFIG ---
        const SCRIPT_URL = "আপনার_গুগল_স্ক্রিপ্ট_লিংক_এখানে"; // এখানে আপনার API লিংক বসবে

        let userLocation = "Unknown";

        // Navigation
        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(id).classList.add('active-page');
            if(id === 'history') loadHistory();
        }

        // Location Tracking
        navigator.geolocation.getCurrentPosition(pos => {
            userLocation = `${pos.coords.latitude}, ${pos.coords.longitude}`;
        });

        // User Management
        function saveUser() {
            const name = document.getElementById('uName').value;
            const phone = document.getElementById('uPhone').value;
            const address = document.getElementById('uAddress').value;
            if(name && phone) {
                localStorage.setItem('sfood_user', JSON.stringify({name, phone, address}));
                checkUser();
            }
        }

        function checkUser() {
            const user = JSON.parse(localStorage.getItem('sfood_user'));
            if(user) {
                document.getElementById('authView').style.display = 'none';
                document.getElementById('profileView').style.display = 'block';
                document.getElementById('pName').innerText = user.name;
                document.getElementById('pPhone').innerText = user.phone;
                document.getElementById('pAddress').innerText = user.address;
                document.getElementById('navUser').innerText = user.name;
            }
        }

        // Order & API Integration
        async function placeOrder(item, price) {
            const user = JSON.parse(localStorage.getItem('sfood_user'));
            if(!user) { alert("আগে প্রোফাইল সেভ করুন!"); showPage('profile'); return; }

            const orderData = {
                date: new Date().toLocaleString(),
                name: user.name,
                phone: user.phone,
                address: user.address,
                item: item,
                price: price,
                location: userLocation
            };

            // ১. লোকাল সেভ
            let orders = JSON.parse(localStorage.getItem('sfood_orders')) || [];
            orders.push(orderData);
            localStorage.setItem('sfood_orders', JSON.stringify(orders));

            // ২. Google Sheet API তে পাঠানো (নিচে যেভাবে কাজ করবে)
            alert("অর্ডার পাঠানো হচ্ছে...");
            
            try {
                // এই অংশটি ডাটা ইন্টারনেটে পাঠাবে
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(orderData)
                });
                alert("অর্ডার সফলভাবে আপনার শিটে জমা হয়েছে!");
            } catch (e) {
                console.log("API link missing, saved locally.");
                alert("অর্ডার সফল (লোকাল)!");
            }
            
            showPage('history');
        }

        function loadHistory() {
            const orders = JSON.parse(localStorage.getItem('sfood_orders')) || [];
            document.getElementById('historyBody').innerHTML = orders.reverse().map(o => `
                <tr>
                    <td>${o.item}</td>
                    <td>৳ ${o.price}</td>
                    <td><span style="color:green">Received</span></td>
                </tr>
            `).join('');
        }

        function logout() { localStorage.clear(); location.reload(); }
        window.onload = checkUser;
    </script>
</body>
    </html>
